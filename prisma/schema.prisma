generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// æ™‚é–“æŒ‡å®šæŠ•ç¨¿ãƒ†ãƒ¼ãƒ–ãƒ«
model ScheduledPost {
  id                 String   @id @default(uuid())
  post_to_discord    Boolean  @default(false)
  post_to_x          Boolean  @default(false)
  discord_content    String?  // ç©ºæ¬„OK
  discord_channel_id String?  // ç©ºæ¬„OK
  x_content          String?  // ç©ºæ¬„OK
  post_at            DateTime // æŠ•ç¨¿æ—¥æ™‚
  image_file_ids     Json?    // ç”»åƒIDã®é…åˆ—ï¼ˆç©ºæ¬„OKï¼‰
  x_poll_options     Json?    // ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆé¸æŠè‚¢ï¼ˆç©ºæ¬„OKï¼‰
  x_poll_duration    Int?     // ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå—ä»˜æ™‚é–“ï¼ˆç©ºæ¬„OKï¼‰
  status             String   @default("PENDING") // PENDING, POSTED, FAILED
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  is_recurring       Boolean  @default(false) // å®šæœŸæŠ•ç¨¿ã‹ã©ã†ã‹
  recurrence_pattern String?  // ç¹°ã‚Šè¿”ã—ã®ç¨®é¡ï¼ˆ"DAILY", "WEEKLY", "MONTHLY" ãªã©ï¼‰
  isDraft           Boolean  @default(false)
}

// å®šæœŸæŠ•ç¨¿ãƒ†ãƒ¼ãƒ–ãƒ«
model RecurringPost {
  id                 String   @id @default(uuid())
  post_to_discord    Boolean  @default(false)
  post_to_x          Boolean  @default(false)
  discord_content    String?  // ç©ºæ¬„OK
  discord_channel_id String?  // ç©ºæ¬„OK
  x_content          String?  // ç©ºæ¬„OK
  cron_schedule      String   // Cronå¼ (ä¾‹: 0 9 * * 1)
  image_file_ids     Json?    // ç”»åƒIDã®é…åˆ—ï¼ˆç©ºæ¬„OKï¼‰
  is_active          Boolean  @default(true) // ç¨¼åƒä¸­ã‹ã©ã†ã‹
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

// ğŸŒŸ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¿å­˜ç”¨ã®æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«
model Template {
  id        String   @id @default(cuid())
  name      String   // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®åå‰ï¼ˆä¾‹ï¼šã‚¤ãƒ™ãƒ³ãƒˆå‘ŠçŸ¥ç”¨ï¼‰
  content   String   // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æœ¬æ–‡
  createdAt DateTime @default(now())
}